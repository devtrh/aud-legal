# ğŸ“ AUD Legal - Sistema de GestiÃ³n Documental

Sistema web para el Ã¡rea legal de **Archivo Ãšnico Digital (AUD)** que permite gestionar clientes externos, expedientes, colaboradores y documentos legales.

## ğŸš€ Estado Actual

### âœ… Implementado (con Mock Data)
- **Sistema de Clientes Externos**
  - Lista de clientes con bÃºsqueda y filtros
  - CreaciÃ³n de nuevos clientes
  - Vista de cards responsive
  - EstadÃ­sticas en tiempo real

### ğŸ”§ En Desarrollo
- PÃ¡gina de detalle de cliente
- MÃ³dulo de expedientes
- MÃ³dulo de colaboradores
- Webhooks de n8n (backend)

---

## ğŸ“¦ Estructura del Proyecto

```
aud-legal/
â”œâ”€â”€ index.html                  # Landing page
â”œâ”€â”€ login.html                  # PÃ¡gina de login
â”‚
â”œâ”€â”€ pages/                      # PÃ¡ginas del sistema
â”‚   â”œâ”€â”€ panel1.html            # Dashboard
â”‚   â”œâ”€â”€ clientes.html          # âœ… Lista de clientes
â”‚   â”œâ”€â”€ cliente-detalle.html   # ğŸ”§ Detalle de cliente
â”‚   â”œâ”€â”€ expedientes.html       # ğŸ”§ Expedientes
â”‚   â””â”€â”€ archivo.html           # Explorador de archivos
â”‚
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ js/
â”‚   â”‚   â”œâ”€â”€ config.js          # âœ… ConfiguraciÃ³n global
â”‚   â”‚   â”œâ”€â”€ api.js             # âœ… Wrapper de API con mock data
â”‚   â”‚   â”œâ”€â”€ clientes.js        # âœ… LÃ³gica de clientes
â”‚   â”‚   â”œâ”€â”€ navigation.js      # Sistema de navegaciÃ³n
â”‚   â”‚   â”œâ”€â”€ mobile-menu.js     # MenÃº mÃ³vil
â”‚   â”‚   â””â”€â”€ archivo.js         # Explorador de archivos
â”‚   â”‚
â”‚   â””â”€â”€ css/
â”‚       â””â”€â”€ main.css
â”‚
â””â”€â”€ README.md                   # Este archivo
```

---

## ğŸ› ï¸ TecnologÃ­as

- **Frontend:** Vanilla JavaScript (ES6+)
- **Estilos:** Tailwind CSS (CDN)
- **Backend:** n8n (webhooks)
- **Base de Datos:** PostgreSQL
- **Servidor:** Ubuntu 24.10
- **Archivos:** Linux File System (`/mnt/automatizacion/AUD/`)

---

## ğŸ¯ ConfiguraciÃ³n

### 1. Modo de Desarrollo (Mock Data)

El proyecto estÃ¡ configurado para usar **datos de prueba** mientras se desarrollan los webhooks de n8n.

```javascript
// assets/js/config.js
const CONFIG = {
  MODE: 'development',
  USE_MOCK_DATA: true, // â† Usar datos falsos
  API_BASE_URL: 'https://n8n.datazentrika.com/webhook'
};
```

### 2. Modo de ProducciÃ³n (Webhooks Reales)

Una vez que los webhooks estÃ©n listos:

```javascript
const CONFIG = {
  MODE: 'production',
  USE_MOCK_DATA: false, // â† Usar webhooks reales
  API_BASE_URL: 'https://n8n.datazentrika.com/webhook'
};
```

---

## ğŸƒ Ejecutar Localmente

### OpciÃ³n 1: Python

```bash
cd aud-legal
python3 -m http.server 8000
# Abre: http://localhost:8000/pages/clientes.html
```

### OpciÃ³n 2: Node.js

```bash
npx http-server -p 8000
# Abre: http://localhost:8000/pages/clientes.html
```

### OpciÃ³n 3: VS Code Live Server

1. Instala la extensiÃ³n **Live Server**
2. Click derecho en `pages/clientes.html`
3. Selecciona **"Open with Live Server"**

---

## ğŸ“Š Base de Datos

### Tablas Implementadas

```sql
-- Clientes externos
CREATE TABLE clientes_externos (
    id SERIAL PRIMARY KEY,
    rfc VARCHAR(13) UNIQUE NOT NULL,
    razon_social TEXT NOT NULL,
    nombre_comercial TEXT,
    giro TEXT,
    status VARCHAR(50) DEFAULT 'Activo',
    fecha_alta DATE DEFAULT CURRENT_DATE,
    responsable_legal_id INT REFERENCES usuarios(id),
    notas TEXT,
    ruta_archivos TEXT,
    creado_en TIMESTAMP DEFAULT NOW(),
    actualizado_en TIMESTAMP DEFAULT NOW(),
    activo BOOLEAN DEFAULT TRUE
);

-- Expedientes
CREATE TABLE expedientes (
    id SERIAL PRIMARY KEY,
    cliente_id INT REFERENCES clientes_externos(id) ON DELETE CASCADE,
    numero_expediente VARCHAR(50) UNIQUE NOT NULL,
    nombre TEXT NOT NULL,
    tipo VARCHAR(100),
    descripcion TEXT,
    fecha_inicio DATE NOT NULL,
    fecha_cierre DATE,
    status VARCHAR(50) DEFAULT 'En Proceso',
    prioridad VARCHAR(20) DEFAULT 'Media',
    asignado_a INT REFERENCES usuarios(id),
    ruta_archivos TEXT,
    creado_en TIMESTAMP DEFAULT NOW(),
    actualizado_en TIMESTAMP DEFAULT NOW(),
    activo BOOLEAN DEFAULT TRUE
);

-- Colaboradores de clientes
CREATE TABLE colaboradores_clientes (
    id SERIAL PRIMARY KEY,
    cliente_id INT REFERENCES clientes_externos(id) ON DELETE CASCADE,
    curp VARCHAR(18) UNIQUE,
    nombre_completo TEXT NOT NULL,
    puesto TEXT,
    email TEXT,
    telefono VARCHAR(20),
    fecha_ingreso DATE,
    fecha_baja DATE,
    status VARCHAR(50) DEFAULT 'Activo',
    ruta_archivos TEXT,
    notas TEXT,
    creado_en TIMESTAMP DEFAULT NOW(),
    actualizado_en TIMESTAMP DEFAULT NOW(),
    activo BOOLEAN DEFAULT TRUE
);
```

---

## ğŸ”Œ Webhooks n8n (Pendientes)

### Clientes Externos
```
POST /webhook/aud-clientes-list          # Listar clientes
POST /webhook/aud-cliente-detail         # Detalle de cliente
POST /webhook/aud-cliente-create         # Crear cliente
POST /webhook/aud-cliente-update         # Actualizar cliente
POST /webhook/aud-cliente-delete         # Eliminar cliente
```

### Expedientes
```
POST /webhook/aud-expedientes-list       # Listar expedientes
POST /webhook/aud-expediente-detail      # Detalle de expediente
POST /webhook/aud-expediente-create      # Crear expediente
POST /webhook/aud-expediente-update      # Actualizar expediente
POST /webhook/aud-expediente-actividad   # Agregar actividad
```

### Colaboradores
```
POST /webhook/aud-colaboradores-list     # Listar colaboradores
POST /webhook/aud-colaborador-create     # Crear colaborador
POST /webhook/aud-colaborador-update     # Actualizar colaborador
POST /webhook/aud-colaborador-docs       # Gestionar documentos
```

---

## ğŸ§ª Datos de Prueba (Mock Data)

El archivo `assets/js/api.js` contiene **3 clientes de ejemplo**:

1. **Constructora ABC S.A. de C.V.**
   - RFC: ABC123456789
   - Giro: ConstrucciÃ³n
   - 5 expedientes, 3 activos

2. **Transportes del Norte S.A. de C.V.**
   - RFC: DEF987654321
   - Giro: Transporte
   - 2 expedientes activos

3. **Servicios Integrales MX S.A. de C.V.**
   - RFC: GHI456789012
   - Giro: Servicios
   - Status: Inactivo

---

## ğŸ“ PrÃ³ximos Pasos

### 1. PÃ¡gina de Detalle de Cliente âœ… (Siguiente)
- Vista completa de informaciÃ³n del cliente
- Lista de expedientes asociados
- Lista de colaboradores
- Acceso rÃ¡pido a documentos

### 2. MÃ³dulo de Expedientes
- CRUD de expedientes
- AsignaciÃ³n a usuarios
- Seguimiento de actividades
- GestiÃ³n de documentos

### 3. MÃ³dulo de Colaboradores
- CRUD de colaboradores
- GestiÃ³n de documentos (INE, CSF, etc.)
- Historial de cambios

### 4. Webhooks de n8n
- Conectar con PostgreSQL
- Implementar lÃ³gica de negocio
- Manejo de archivos en servidor Linux

---

## ğŸ‘¥ Roles y Permisos (Futuro)

```javascript
roles = {
  'Jefe Legal': {
    permisos: ['crear', 'editar', 'eliminar', 'ver_todo']
  },
  'Abogado': {
    permisos: ['crear', 'editar', 'ver_asignados']
  },
  'Asistente Legal': {
    permisos: ['ver_asignados', 'subir_documentos']
  }
}
```

---

## ğŸ› Problemas Conocidos

- [ ] Los filtros de status necesitan persistir al recargar
- [ ] Falta paginaciÃ³n en lista de clientes (cuando sean +50)
- [ ] El panel de detalle en desktop estÃ¡ deshabilitado (pendiente implementar)

---

## ğŸ“ Contacto

- **Proyecto:** AUD Legal
- **Repositorio:** https://github.com/devtrh/aud-legal
- **Stack:** n8n + PostgreSQL + Vanilla JS

---

## ğŸ“„ Licencia

Proyecto privado - Uso interno exclusivo.

---

**Ãšltima actualizaciÃ³n:** 5 de Febrero, 2026